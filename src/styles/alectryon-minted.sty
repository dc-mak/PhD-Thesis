\ProvidesPackage{styles/alectryon-minted}

\RequirePackage{minted}

% For code
% See https://tex.stackexchange.com/questions/515641/minted-error-when-using-customized-fontfamily
\newfontfamily\firacode{Fira Code}
  [BoldFont={Fira Code Medium},Contextuals={Alternate},
  NFSSFamily=FiraCode,Scale=MatchLowercase,ScaleAgain=0.95]%
\RequirePackage{lstfiracode}
\ActivateVerbatimLigatures%

\usemintedstyle{default}

\setminted{autogobble,fontfamily=FiraCode}

% Meven's (Rocq)
\newminted[coqcode]
  {coq}
  {}

\newmint[coqline]
  {coq}
  {}

\newmintinline[coqe]
  {coq}
  {}

\newmintedfile[coqfile]
  {coq}
  {}

% C code
\newminted[ccode]
  {cn}
  {}

\newmint[cliner]
  {cn}
  {}

\newmintinline[cinline]
  {cn}
  {}

\newmintedfile[cfile]
  {cn}
  {linenos,fontsize=\small}

% OCaml
\newminted[ocamlcode]
  {ocaml}
  {}

\newmint[ocamlline]
  {ocaml}
  {}

\newmintinline[ocamlinline]
  {ocaml}
  {}

\newmintedfile[ocamlfile]
  {ocaml}
  {linenos,fontsize=\footnotesize,breaklines}

% Core
\newminted[corecode]
  {ocaml}
  {bgcolor=yellow!20,fontsize=\small}

\newmint[coreline]
  {ocaml}
  {}

\newmintinline[coreinline]
  {ocaml}
  {}

\newmintedfile[corefile]
  {ocaml}
  {bgcolor=yellow!20,linenos,fontsize=\small}

% CN
\newminted[cncode]
  {cn-spec}
  {}

\newmint[cnline]
  {cn-spec}
  {}

\newmintinline[cninline]
  {cn-spec}
  {}

\newmintedfile[cnfile]
  {cn-spec}
  {linenos,fontsize=\small}

% For minted code in footnotes, see https://tex.stackexchange.com/questions/331695/number-signs-in-mintinline-in-footnote
\ExplSyntaxOn%
\NewDocumentCommand{\mintedstring}{mv}
 {
  \tl_clear_new:c { l_minted_string_#1_tl }
  \tl_set:cn { l_minted_string_#1_tl } { #2 }
 }
\NewDocumentCommand{\mintinlinestring}{mm}
 {
  \minted_inline_string:nv { #1 } { l_minted_string_#2_tl }
 }
\cs_new_protected:Nn \minted_inline_string:nn
 {
  \mintinline{#1}{#2}
 }
\cs_generate_variant:Nn \minted_inline_string:nn { nv }
\ExplSyntaxOff%
